funcs:
  - name: importNamesEqual
    type: asserter
    body: |
      function(a, b) {
        var aSplit = a.toLowerCase().split("/")
        var bSplit = b.toLowerCase().split("/")
        return a[a.length - 1] === b[b.length - 1]
      }
  - name: neq
    type: asserter
    body: |
      function(a, b) {
        return a !== b
      }
tenets:
  - name: avoid-renaming-imports
    flows:
      codelingo/docs:
        title: Avoid Renaming Imports
        body: |
          Avoid renaming imports except to avoid a name collision. Good package names
          should not require renaming. In the event of a collision, prefer to rename the
          most local or project-specific import.
      codelingo/review:
        comment: |
          Avoid renaming imports, unless there is a collision, in which case prefer to rename the most local or project-specific import.
          From [Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments#imports).
    query: |
      import codelingo/ast/go

      go.gen_decl(depth = any):
        @review comment
        go.import_spec:
          start_offset as soOne # stand in for UID
          go.ident: # Ident is the rename and absent if not named
            name as importName
            name != "_"
          go.basic_lit: # Basic_lit is the "import/path"
            value as importOne
        exclude:
          go.import_spec:
            start_offset as soTwo
            neq(soOne, soTwo)
            go.basic_lit:
              value as importTwo
              importNamesEqual(importOne, importTwo)